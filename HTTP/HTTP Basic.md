## HTTP 기본

- HTTP(HyperText Transfer Protocol)
- HTTP에 모든 것(HTML, TEXT, 이미지, 음성, 영상, 파일, json, XML)을 담아서 전송
- 클라이언트 서버 구조
- 무상태 프로토콜(Stateless), 비연결성
- HTTP 메시지
- 단순함, 확장 가능



### 1. 클라이언트 서버 구조

- Request Response 구조
- 클라이언트는 서버에 요청을 보내고, 응답을 대기
- 서버가 요청에 대한 결과를 만들어서 응답
- 독립적으로 진행이 가능하다.



### 2. Stateful, Stateless

- Stateless(무상태 프로토콜)
  - 서버가 클라이언트의 상태를 보존X
  - 장점: 서버 확장성 높다(스케일 아웃)
  - 단점: 클라이언트가 추가 데이터 전송



차이점

- Stateful: 중간에 다른 점원으로 바뀌면 안된다(바뀔시 다른 점원에게 알려줘야한다.), 항상 같은 서버를 유지해야한다. -> 서버 장애가 나면 다시 처음부터 해야한다.

  상태유지는 꼭 필요한 경우에만 사용.

  

- Stateless: 중간에 다른 점원으로 바뀌어도 된다.(다른 점원에게 알려줄 필요가 없다.), 서버 장애가 나도 다른 서버에서 응답이 가능, 스케일 아웃에 유리
  - 한계: 로그인을 할 때는 로그인 했다는 정보를 서버에 유지, 브라우저 쿠키와 서버 세션등 상태 유지를 해야한다.



### 3. 비 연결성(connectionless)

- HTTP는 기본이 연결을 유지하지 않는 모델
- 일반적으로 초 단위의 이하의 빠른 속도로 응답
- 1시간 동안 수천명이 서비스를 사용해도 실제 서버에서 동시에 처리하는 요청은 수십개 이하로 매우 작음
- 서버 자원을 매우 효율적으로 사용할 수 있다.

한계

- TCP/IP 연결을 새로 맺어야 한다 - 3 way handshake 시간 추가
- 웹 브라우저로 사이트를 요청하면 HTML 뿐 아니라 JS, CSS, 추가 이미지 등 수많은 자원이 함께 다운로드
- 지금은 HTTP 지속 연결로 문제 해결
- HTTP/2, HTTP/3에서 더 많은 최적화



### 4. HTTP 메시지

- HTTP 메시지 구조

시작 라인, 헤더, 공백 라인, message body

- 시작라인: request line(요청) / status line(응답) 으로 
  - 요청시엔 HTTP 메서드, 요청대상, HTTP Version 이 담긴다
  - 응답시엔 HTTP 버전, HTTP 상태 코드(200: 성공, 400: 클라이언트 요청 오류, 500: 서버 내부 오류)
- 헤더: HTTP 전송에 필요한 모든 부가정보, 표준 헤더가 너무 많다, 필요시 임의의 헤더 추가 가능
- 메시지 바디: 실제 전송할 데이터, HTML, 이미지, 영상, JSON 등등 byte로 표현된 모든 데이터